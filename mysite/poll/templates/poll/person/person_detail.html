{% extends "poll/header.html" %}

{% block content %}
<h2>{{ person_detail.person_name }}</h2>
<div style="margin-left:20px;margin-top:20px">

    <table class="editorDemoTable" width="350" border="3">
        <tbody>
        <tr>
            <td><h5> Владелец: </h5></td>
            <td><a href="/poll/owners/{{ person_detail.owner.id }}/">{{ person_detail.owner.owner_name }} </a></td>
        </tr>
        <tr>
            <td><h5>Изображение:</h5></td>
            <td> <img src="{{ object.person_img.url }}"></td>
        </tr>
        <tr>
            <td><h5>Краткое описание:</h5></td>
            <td> {{ person_detail.description }}</td>
        </tr>
        <tr>
            <td><h5>Ссылка:</h5></td>
            <td>{{ person_detail.link }}</td>
        </tr>
        <tr>
            <td><h5>Биография:</h5></td>
            <td> {{ person_detail.biography }}</td>
        </tr>
        <tr>
            <td><h5>Характер:</h5></td>
            <td> {{ person_detail.character }}</td>
        </tr>
        <tr>
            <td><h5>Интересы:</h5></td>
            <td> {{ person_detail.interests }}</td>
        </tr>
        <tr>
            <td><h5>Фобии:</h5></td>
            <td> {{ person_detail.phobias }}</td>
        </tr>
        <tr>
            <td><h5>Раса:</h5></td>
            <td>{{ person_detail.race }}</td>
        </tr>
        <tr>
            <td><h5>Слабости и особенности:</h5></td>
            <td>
                {% for feature in person_detail.f %}
                <ul>
                    <li> {{ feature }}</a></li>
                </ul>
                {% endfor %}
            </td>
        </tr>
        <tr>
            <td><h5>Основная характеристика:</h5></td>
            <td>{{ main_points }}</td>
        </tr>
        <tr>
            <td><h5>Основное умение:</h5></td>
            <td>{{ main_permission }}</td>
        </tr>
        <tr>
            <td><h5>Мeсто возрождения:</h5></td>
            <td>{{ person_detail.location_birth }}</td>
        </tr>
        <tr>
            <td><h5>Дата рождения:</h5></td>
            <td>{{ person_detail.birth_date }}</td>
        </tr>
        <tr>
            <td><h5>Мeсто смерти:</h5></td>
            <td>{{ person_detail.location_death }}</td>
        </tr>
        <tr>
            <td><h5>Дата смерти:</h5></td>
            <td>{{ person_detail.death_date }}</td>
        </tr>
        <tr>
            <td><h5>Текущий статус:</h5></td>
            <td>{{ status_ }}</td>
        </tr>

        <tr>
            <td colspan="2"><h5>Текущие кондиции: </h5></td>
        </tr>
        <tr>
            <td>Здоровье:</td>
            <td>{{ health }}</td>
        </tr>
        <tr>
            <td>Ментальное здоровье:</td>
            <td>{{ mental_health }}</td>
        </tr>
        <tr>
            <td>Выносливость:</td>
            <td>{{ endurance }}</td>
        </tr>
        <tr>
            <td>Мана:</td>
            <td>{{ mana }}</td>
        </tr>
        <tr>
            <td>Голод:</td>
            <td>{{ hungry }}</td>
        </tr>
        <tr>
            <td>Интоксикация:</td>
            <td>{{ intoxication }}</td>
        </tr>
        <tr>
            <td>Переносимый вес:</td>
            <td>{{ load_capacity }}</td>
        </tr>
        <tr>
            <td>Устойчивость к физ. урону:</td>
            <td>{{ avg_physic_resistance }}</td>
        </tr>
        <tr>
            <td>Устойчивость к маг. урону:</td>
            <td>{{ avg_magic_resistance }}</td>
        </tr>
        <tr>
            <td><h5>Членство в группе:</h5></td>
            <td>{{ group_status }}</td>
        </tr>
        {% if group_status != 'в группе' %}
        <tr>
            {% if person_detail.created_by.username == user.username %}
            <td colspan="2">
                <p><a href="{% url 'poll:group-add' person_detail.id %}"> + Организовать группу? </a></p>
                <p><a href="{% url 'poll:membership-update' person_detail.id %}"> + Вступить в группу? </a></p>
            </td>
            {% endif %}
            {% else %}
            <td><h6> Организатор группы : </h6></td>
            <td><a href="/poll/persons/{{inviter_person.id }}/"> {{inviter_person.person_name}}</a></td>
        </tr>
        <tr>
            <td><h6>Участники группы: </h6></td>
            <td>
                {% for participant in participants %}
                <ul>
                    <li><a href="/poll/persons/{{ participant.id }}/"> {{ participant.person_name }}</a></li>
                </ul>
                {% endfor %}
            </td>
        </tr>
        <tr>
            <td>
                {% if inviter_person.person_name == person_detail.person_name %}
                <p><a href="{% url 'poll:group-delete' person_detail.id %}"> + Пригласить в группу?</a></p>
                <p><a href="{% url 'poll:group-delete' person_detail.id %}"> + Удалить из группы?</a></p>
                {% else %}
                <p><a href="{% url 'poll:group-delete' person_detail.id %}"> + Выйти из группы?</a></p>
                {% endif %}
            </td>
            <td></td>
        </tr>
        {% endif %}
        <tr>
            <td colspan="2"><h5>Характеристики: </h5></td>
        </tr>

        {% for key, value in summary_points.items %}
        <tr>
            <td>
                {{ key}}
            </td>
            <td>{{ value }}</td>
        </tr>
        {% endfor %}

        <tr>
            <td colspan="2"><h5>Устойчивость: </h5></td>
        </tr>

        {% for key, value in summary_resistances.items %}
        <tr>
            <td>
                {{key }}
            </td>
            <td>{{ value }}</td>
        </tr>
        {% endfor %}
        <tr>
            <td colspan="2"><h5>Навыки: </h5></td>
        </tr>

        {% for key, value in summary_permissions.items %}
        <tr>
            <td>
                {{ key }}
            </td>
            <td>{{ value }}</td>
        </tr>
        {% endfor %}
        <tr>
            <td colspan="2"><h5>Снаряжение: </h5></td>
        </tr>

        {% for key, value in summary_equipment.items %}
        <tr>
            <td>{{ key }}</td>
            <td>{{ value }}</td>
        </tr>
        {% endfor %}
        <tr>
            <td><h5>Нераспределенные очки: </h5></td>
            <td>{{ unallocated_points}}</td>
        </tr>

        <tr>
            <td><h5>Нераспределенные умения: </h5></td>
            <td>{{ unallocated_permissions}}</td>
        </tr>
        <tr>
            <td><h5>Дальность обзора: </h5></td>
            <td>{{ rov }}</td>
        </tr>
        <tr>
            <td><h5>Область обзора: </h5></td>
            <td>{{ fov }}</td>
        </tr>
        </tbody>
    </table>
</div>
<hr>
{% if person_detail.created_by.username == user.username %}
<p><a href="{% url 'poll:person-update' person_detail.id %}">+ Редактировать Персонаж </a></p>
<p><a href="{% url 'poll:person-delete' person_detail.pk %}">- Удалить Персонаж</a></p>
{% endif %}

{% endblock %}


